{% extends "base_int_app.html" %}

{% block title %}Orders{% endblock %}


{% block content %}
{% if order_list %}

<style>
.gel_row {
  grid-template-columns: 2fr 2fr 2fr 2fr;
}
.gel_row > div.ready {
  background-color:  springgreen;
}

.new {
    font-weight: bold;
    background-color: #1ac41a;
    color: white;
    padding: 0 1px;
}
</style>
  
<div style="display:flex;gap: 10px;">
  <div>
    <a href="{{ url ('prestashop:order') }}">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="80" height="80" viewBox="0 0 500 500"><rect x="0" y="0" width="500" height="500" fill="#ffffff"/><g transform="scale(16.129)"><g transform="translate(1,1)"><g><g transform="translate(3.5,3.5)"><path fill-rule="evenodd" d="M-3.5 -3.5L3.5 -3.5L3.5 3.5L-3.5 3.5ZM-2.5 -2.5L-2.5 2.5L2.5 2.5L2.5 -2.5Z" fill="#000000"/><path fill-rule="evenodd" d="M-1.5 -1.5L1.5 -1.5L1.5 1.5L-1.5 1.5Z" fill="#000000"/></g></g><g><g transform="translate(25.5,3.5)"><g transform="rotate(90)"><path fill-rule="evenodd" d="M-3.5 -3.5L3.5 -3.5L3.5 3.5L-3.5 3.5ZM-2.5 -2.5L-2.5 2.5L2.5 2.5L2.5 -2.5Z" fill="#000000"/><path fill-rule="evenodd" d="M-1.5 -1.5L1.5 -1.5L1.5 1.5L-1.5 1.5Z" fill="#000000"/></g></g></g><g><g transform="translate(3.5,25.5)"><g transform="rotate(-90)"><path fill-rule="evenodd" d="M-3.5 -3.5L3.5 -3.5L3.5 3.5L-3.5 3.5ZM-2.5 -2.5L-2.5 2.5L2.5 2.5L2.5 -2.5Z" fill="#000000"/><path fill-rule="evenodd" d="M-1.5 -1.5L1.5 -1.5L1.5 1.5L-1.5 1.5Z" fill="#000000"/></g></g></g><path fill-rule="evenodd" d="M8 0L8 1L9 1L9 2L10 2L10 3L11 3L11 2L12 2L12 4L11 4L11 5L10 5L10 4L9 4L9 3L8 3L8 8L6 8L6 9L7 9L7 10L6 10L6 11L7 11L7 12L6 12L6 13L8 13L8 16L9 16L9 17L8 17L8 18L10 18L10 20L8 20L8 23L9 23L9 24L8 24L8 25L9 25L9 26L10 26L10 27L11 27L11 26L10 26L10 24L12 24L12 25L13 25L13 28L14 28L14 29L15 29L15 28L14 28L14 25L15 25L15 23L16 23L16 24L18 24L18 25L19 25L19 26L18 26L18 27L16 27L16 26L15 26L15 27L16 27L16 28L18 28L18 27L19 27L19 26L20 26L20 25L21 25L21 26L22 26L22 29L23 29L23 28L24 28L24 29L25 29L25 28L27 28L27 29L28 29L28 28L27 28L27 27L29 27L29 26L28 26L28 25L29 25L29 24L28 24L28 23L29 23L29 22L28 22L28 23L27 23L27 21L25 21L25 20L22 20L22 19L23 19L23 17L24 17L24 19L27 19L27 20L28 20L28 19L29 19L29 17L28 17L28 14L27 14L27 13L28 13L28 12L26 12L26 11L27 11L27 9L26 9L26 8L21 8L21 5L20 5L20 4L21 4L21 3L20 3L20 2L21 2L21 1L20 1L20 2L19 2L19 1L17 1L17 2L15 2L15 3L14 3L14 2L12 2L12 1L11 1L11 0ZM14 0L14 1L15 1L15 0ZM10 1L10 2L11 2L11 1ZM13 3L13 4L12 4L12 5L11 5L11 7L10 7L10 6L9 6L9 7L10 7L10 8L12 8L12 9L11 9L11 10L10 10L10 9L9 9L9 10L8 10L8 11L9 11L9 10L10 10L10 12L11 12L11 14L9 14L9 15L11 15L11 16L10 16L10 18L11 18L11 20L10 20L10 22L9 22L9 23L10 23L10 22L11 22L11 23L12 23L12 22L13 22L13 24L14 24L14 23L15 23L15 22L13 22L13 20L12 20L12 19L13 19L13 18L15 18L15 17L16 17L16 18L17 18L17 19L14 19L14 21L16 21L16 23L18 23L18 24L19 24L19 25L20 25L20 24L19 24L19 23L18 23L18 22L19 22L19 21L18 21L18 19L20 19L20 18L18 18L18 17L19 17L19 15L22 15L22 16L24 16L24 17L25 17L25 18L26 18L26 17L25 17L25 16L27 16L27 15L22 15L22 13L21 13L21 12L20 12L20 13L21 13L21 14L19 14L19 13L17 13L17 12L16 12L16 11L18 11L18 12L19 12L19 11L22 11L22 12L24 12L24 13L23 13L23 14L24 14L24 13L25 13L25 14L26 14L26 13L25 13L25 11L22 11L22 10L24 10L24 9L22 9L22 10L21 10L21 8L20 8L20 9L19 9L19 8L18 8L18 9L17 9L17 8L16 8L16 4L15 4L15 9L13 9L13 8L14 8L14 6L13 6L13 4L14 4L14 3ZM17 3L17 5L18 5L18 3ZM19 3L19 4L20 4L20 3ZM12 6L12 7L13 7L13 6ZM17 6L17 7L18 7L18 6ZM19 6L19 7L20 7L20 6ZM0 8L0 10L2 10L2 11L3 11L3 9L1 9L1 8ZM4 8L4 9L5 9L5 8ZM28 8L28 9L29 9L29 8ZM25 9L25 10L26 10L26 9ZM11 10L11 11L12 11L12 10ZM13 10L13 14L15 14L15 13L14 13L14 11L16 11L16 10ZM18 10L18 11L19 11L19 10ZM28 10L28 11L29 11L29 10ZM0 11L0 14L2 14L2 13L3 13L3 12L2 12L2 13L1 13L1 11ZM8 12L8 13L9 13L9 12ZM4 13L4 14L3 14L3 15L1 15L1 16L2 16L2 17L0 17L0 18L2 18L2 20L0 20L0 21L4 21L4 20L3 20L3 16L5 16L5 18L4 18L4 19L5 19L5 18L6 18L6 19L7 19L7 18L6 18L6 17L7 17L7 16L5 16L5 15L4 15L4 14L5 14L5 13ZM6 14L6 15L7 15L7 14ZM18 14L18 15L16 15L16 17L17 17L17 16L18 16L18 15L19 15L19 14ZM14 15L14 16L12 16L12 17L11 17L11 18L13 18L13 17L15 17L15 15ZM21 17L21 19L22 19L22 17ZM27 17L27 18L28 18L28 17ZM6 20L6 21L7 21L7 20ZM11 21L11 22L12 22L12 21ZM21 21L21 24L24 24L24 21ZM22 22L22 23L23 23L23 22ZM25 23L25 24L26 24L26 25L28 25L28 24L26 24L26 23ZM22 25L22 26L23 26L23 27L24 27L24 26L25 26L25 27L26 27L26 26L25 26L25 25L24 25L24 26L23 26L23 25ZM8 28L8 29L12 29L12 28ZM20 28L20 29L21 29L21 28Z" fill="#000000"/></g></g></svg>
    </a>
  </div>
  <div>
    {% for qnt in o_qnt %}
    {{qnt[0]}}: {{qnt[1]}}<br>
    {% endfor %}
  </div>
</div>


<div class="gel_table">
  <div class="gel_thead">
    <div class="gel_row">
          <div>id/ref/paid
          </div>
          <div>customer</div>
          <div>state</div>
          <div>date</div>
    </div>
  </div>
  <div class="gel_tbody">
    {% for order in order_list %}
      <div class="gel_row {% if order.id_order_state>=4 and order.id_order_state<=7 %}gel_row_done {% endif %}" data-id_order="{{order.id_order}}">
          <div>
            <a href="{{ url ('prestashop:order_detail',args=[order.id_order]) }}">{{order.id_order}}</a>
            <br>
            <a href="{{ url ('prestashop:order_detail',args=[order.id_order]) }}">{{order.reference}}</a>
            <br>
            {% if order.currency_code=='GBP' %}Â£{% endif %}{{ order.total_paid | round(2) }}
          </div>
          <div><a href="{{ url ('prestashop:order_detail',args=[order.id_order]) }}">{{order.firstname}} {{order.lastname}}</a>
            {% if order.is_new %}  
            <span class="new">N</span>
            {% endif %}
            <br />
            {%if order.country=='United Kingdom'%}{%else%}{{order.country}}:{% endif %} {{order.postcode}}
          </div>
          <div class="order_state"><a href="{{ url ('prestashop:order_detail',args=[order.id_order]) }}">{{order.order_state}}</a> {{order.id_order_state}}</div>
          <div><a href="{{ url ('prestashop:order_detail',args=[order.id_order]) }}">{{order.date_add.strftime("%d/%m/%y %H:%M")}}</a></div>
      </div>
      {% endfor %}
  </div>
</div>
  {% else %}
    <p>There are no orders.</p>
  {% endif %}     
{% endblock content %}



{% block javascript %}
{{ super() }}
<script>
$(document).ready(function(){
  $('.gel_row').each(function(){
    let id_order = $(this).attr('data-id_order');
    console.log(id_order);
    let ready = window.localStorage.getItem('o'+id_order+'-ready');
    console.log(ready);
    if (ready) {
      $(this).find('.order_state').addClass('ready');
    }
    else {
      $(this).find('.order_state').removeClass('ready');
    }

  });
});
</script>
{% endblock %}
